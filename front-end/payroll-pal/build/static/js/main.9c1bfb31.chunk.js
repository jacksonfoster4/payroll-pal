(this["webpackJsonppayroll-pal"]=this["webpackJsonppayroll-pal"]||[]).push([[0],{19:function(e,t,a){},23:function(e,t,a){},29:function(e,t,a){e.exports=a(43)},34:function(e,t,a){},41:function(e,t,a){e.exports=a.p+"static/media/Payroll-Pal-Logo Large.bdaaacca.svg"},42:function(e,t,a){e.exports=a.p+"static/media/Payroll-Pal-Logo Small.245426ad.svg"},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),o=a.n(l),c=(a(34),a(3)),s=a(4),i=a(7),u=a(6),d=a(8),m=(a(19),a(13)),p=r.a.createContext({isAuthenticated:function(){},authToken:function(){},logout:function(){}}),v=a(9),y=a.n(v),E=a(15),h=(a(23),a(17)),b=a.n(h),f="http://localhost:5000",g=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"sendRequest",value:function(){var e=Object(E.a)(y.a.mark((function e(t,a,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f).concat(t),{headers:new Headers({"Content-Type":"application/json"}),method:a||"POST",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){return e}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"sendAuthedRequest",value:function(){var t=Object(E.a)(y.a.mark((function t(a,n,r){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(f).concat(a),{headers:new Headers({"Content-Type":"application/json",Authorization:"JWT "+e.getAuthToken()}),method:n||"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){return e}),(function(e){return e}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"login",value:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var r=a[0].username,l=a[0].password,o={username:r,password:l};a[0].demo;return e.sendRequest("/auth","POST",o).then((function(t){var a=t.access_token;return e.setAuthToken(a),t}),(function(e){return e}))}},{key:"getEntries",value:function(t,a){if(!t){var n=new Date("October 21, 2019");t=[n.getMonth()+1,n.getDate(),n.getFullYear()]}if(!a){var r=new Date("October 27, 2019");a=[r.getMonth()+1,r.getDate(),r.getFullYear()]}var l={start:t,end:a};return e.sendAuthedRequest("/get-entries","POST",l)}},{key:"updateEntry",value:function(t){var a={entry:t};return e.sendAuthedRequest("/update-entry","POST",a)}},{key:"approveAll",value:function(t,a){var n={start:t,end:a};return e.sendAuthedRequest("/approve-all","POST",n)}},{key:"logout",value:function(){e.deleteAuthToken(),b.a.remove("demo")}},{key:"getAuthToken",value:function(){return b.a.get("authToken")}},{key:"getIsAuthenticated",value:function(){var t=Object(E.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendAuthedRequest("/verify","GET").then((function(e){return!e.error}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"setAuthToken",value:function(e){b.a.set("authToken",e)}},{key:"deleteAuthToken",value:function(){b.a.remove("authToken")}}]),e}(),N=function(){return g.sendAuthedRequest("/hearbeat","GET").then((function(e){if(e.error)throw Error("Whoops! Something went wrong. Your token most likely expired or was invalid.")}))},x=g,O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).login=function(){var e=Object(E.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=document.getElementById("username").value,r=document.getElementById("password").value,e.next=5,x.login({username:n,password:r});case 5:e.sent&&(a.props.context.authenticate(),a.props.history.push("/core"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pt-4 login-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"}),r.a.createElement("div",{className:"p-4 login-form-container"},r.a.createElement("h1",{className:""},"Login"),r.a.createElement("form",{id:"form",onSubmit:this.login},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"pt-3 col-12"},r.a.createElement("input",{className:"mb-4 pt-mono",id:"username",type:"text",placeholder:"Username"})),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{className:"pt-mono",id:"password",type:"password",placeholder:"Password"}))),r.a.createElement("button",{type:"submit",className:"btn px-3 mt-4 pt-mono pill btn-orange"},"Login")))))}}]),t}(r.a.Component),j=Object(m.g)((function(e){return r.a.createElement(p.Consumer,null,(function(t){return r.a.createElement(O,Object.assign({context:t},e))}))})),k=a(41),w=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).demoLogin=function(){x.login({demo:!0})&&(a.props.context.authenticate(),a.props.history.push("/core"))},a.state={error:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.context.isAuthenticated?r.a.createElement(m.a,{to:"/core"}):r.a.createElement("div",{className:"container login-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"login-logo-container pt-4 col-12"},r.a.createElement("img",{alt:"Payroll Pal",src:k,width:300,height:300}))),this.props.location.state&&this.props.location.state.error?r.a.createElement("div",{className:"alert mx-5 alert-danger"},this.props.location.state.error):r.a.createElement("div",null),r.a.createElement(j,null),r.a.createElement("div",{onClick:this.demoLogin,className:"btn pill mt-4 btn-warning"},"View Demo"),r.a.createElement("br",null))}}]),t}(r.a.Component),S=function(e){return r.a.createElement(p.Consumer,null,(function(t){return r.a.createElement(w,Object.assign({},e,{context:t}))}))},P=a(28),A=a(11),C=a(42);var T=function(){var e=Object(n.useContext)(B),t=Object(n.useContext)(p);return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar fixed-top navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"ml-3 navbar-brand",href:"/core"},r.a.createElement("img",{alt:"Payroll Pal",src:C})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse justify-content-end navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"px-2 nav-item"},r.a.createElement("div",{onClick:function(){e.approveAll(),e.setMessage("All hours have been approved!")},className:"pt-mono nav-link"},"Approve All")),r.a.createElement("li",{className:"px-2 nav-item"},r.a.createElement("div",{className:"pt-mono pay-rate-container nav-link"},"Pay Rate: $",r.a.createElement("input",{className:"pay-rate-input",onChange:function(t){e.setPayRate(t.target.value)},defaultValue:e.payRate,type:"number"}))),r.a.createElement("li",{className:"px-2 nav-item"},r.a.createElement(A.b,{to:"/login",className:"pt-mono nav-link",onClick:function(){t.logout()}},"Logout"))))))};var I=function(){var e=Object(n.useContext)(B);return r.a.createElement("div",{className:"greeting-container"},r.a.createElement("h1",{className:"greeting"},"Hi ",e.firstName,"!"),r.a.createElement("div",{className:"greeting-content pt-mono"},"You've worked ",e.totalHours," hours.",r.a.createElement("br",null),"That equals ",r.a.createElement("span",{className:"orange-text"},"$"),e.totalHours*e.payRate,"!"))},M=a(12);var J=function(e){var t=Object(n.useState)(e.entry),a=Object(M.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(l.punches?l.punches.length:0),s=Object(M.a)(c,2),i=s[0],u=s[1],d=Object(n.useContext)(B),m={Monday:"monday",Tuesday:"tuesday",Wednesday:"wednesday",Thursday:"thursday",Friday:"friday",Saturday:"saturday",Sunday:"sunday"},p=function(e){return r.a.createElement("div",{className:"punch container-fluid my-4"},r.a.createElement("div",{className:"row text-center px-2"},r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("select",{name:"punch-type",className:"pt-mono punchType",onChange:v,defaultValue:e.type,id:e.punchIndex},r.a.createElement("option",{value:"work"},"Work"),r.a.createElement("option",{value:"meal"},"Meal"),r.a.createElement("option",{value:"bereavment"},"Bereavement"),r.a.createElement("option",{value:"holiday"},"Holiday"),r.a.createElement("option",{value:"jury_duty"},"Jury Duty"),r.a.createElement("option",{value:"personal_time_off"},"Personal Time Off"),r.a.createElement("option",{value:"sick"},"Sick"),r.a.createElement("option",{value:"unpaid_time"},"Unpaid Time"),r.a.createElement("option",{value:"vacation"},"Vacation"))),r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("input",{defaultValue:e.start,onChange:v,id:e.punchIndex,className:"pt-mono start",type:"text",placeholder:"Start",name:"start"})),r.a.createElement("div",{className:"col-4 px-1 d-inline"},r.a.createElement("input",{defaultValue:e.end,onChange:v,id:e.punchIndex,className:"pt-mono end",type:"text",placeholder:"End",name:"end"}),r.a.createElement("div",{id:e.punchIndex,onClick:y,className:"delete d-inline text-center"}," X "))))};Object(n.useEffect)((function(){var t=Object.assign({},l);t.approved=e.entry.approved,o(t)}),[e.entry]);var v=function(e){var t=e.target.id;switch(e.target.name){case"punch-type":l.punches[t][0]=e.target.value;break;case"start":l.punches[t][1]=e.target.value;break;case"end":l.punches[t][2]=e.target.value}},y=function(e){var t=e.target.id;l.punches.splice(t,1),u(i-1)},E=function(t){var a=Object.assign({},l);a.approved?(a.approved=!1,d.allApproved=!1):(a.approved=!0,e.setApproved(!0)),o(a),e.setEntry(a)};return r.a.createElement("div",{className:"modal fade",id:"edit-entry-".concat(e.entryIndex),tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content border-radius-15 p-2"},r.a.createElement("div",{className:"modal-header d-block edit-entry-header"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),r.a.createElement("h5",{className:"display-4 modal-title ".concat(m[e.entry.day]),id:"exampleModalLabel"},e.entry.day),r.a.createElement("h5",{className:"".concat(m[e.entry.day]," pt-mono d-inline"),id:"exampleModalLabel"},["January","February","March","April","May","June","July","August","September","October","November","December"][e.entry.date[0]-1]," ",e.entry.date[1]," ",e.entry.date[2]),l.approved?r.a.createElement("div",{className:"badge ml-2 d-inline badge-success"},"Approved"):r.a.createElement("div",{className:"badge ml-2 d-inline badge-warning"},"Not Approved")),r.a.createElement("div",{id:"edit-entry-body-".concat(e.entryIndex),className:"pt-4 modal-body"},r.a.createElement("div",{className:"px-3 container-fluid"},r.a.createElement("div",{className:"row px-3"},r.a.createElement("div",{className:"punch-title col-4 w-85 px-1 text-center pt-mono black"},"Punch Type"),r.a.createElement("div",{className:"punch-title col-4 w-85 px-1 text-center pt-mono black"},"Start"),r.a.createElement("div",{className:"punch-title col-4 w-85 text-center pt-mono black"},"End"))),l.punches?l.punches.map((function(t,a){return r.a.createElement(p,{entryIndex:e.entryIndex,type:t[0],start:t[1],end:t[2],punchIndex:a,key:a})})):null,r.a.createElement("div",{onClick:function(){l.punches.push(["work",null,null]),u(i+1)},className:"btn pill btn-dark mt-2 add-punch"},"Add punch")),r.a.createElement("div",{className:"modal-footer pt-4 edit-entry-footer"},l.approved?r.a.createElement("button",{onClick:E,type:"button",name:"approve",className:"btn pill px-3 btn-warning"},"Unapprove"):r.a.createElement("button",{onClick:E,type:"button",name:"approve",className:"btn pill px-3 approve-button"},"Approve"),r.a.createElement("button",{onClick:function(t){e.updateEntry(l)},type:"button","data-dismiss":"modal",name:"save",className:"btn pill px-3 save"},"Save")))))};var D=function(e){var t={Monday:["monday-left","monday-right"],Tuesday:["tuesday-left","tuesday-right"],Wednesday:["wednesday-left","wednesday-right"],Thursday:["thursday-left","thursday-right"],Friday:["friday-left","friday-right"],Saturday:["saturday-left","saturday-right"],Sunday:["sunday-left","sunday-right"]},a=Object(n.useState)(e),l=Object(M.a)(a,2),o=l[0],c=l[1],s=Object(n.useState)(!1),i=Object(M.a)(s,2),u=i[0],d=i[1],m=Object(n.useContext)(B);return Object(n.useEffect)((function(){if(m.allApproved){var e=Object.assign({},o);e.approved=!0,c(e)}}),[m.allApproved]),r.a.createElement("div",null,r.a.createElement("div",{"data-toggle":"modal","data-target":"#edit-entry-".concat(e.index),className:"row entry"},r.a.createElement("div",{className:"col-8 p-4 entry-left ".concat(t[e.day][0]," ")},r.a.createElement("div",{className:"day"},e.day),o.approved?r.a.createElement("div",{className:"ml-2 badge badge-success approval"},"\u2713"):r.a.createElement("div",{className:"ml-2 badge badge-warning approval"},"\u2717"),r.a.createElement("br",null),r.a.createElement("div",{className:"date pt-mono"},["January","February","March","April","May","June","July","August","September","October","November","December"][e.date[0]-1]," ",e.date[1]," ",e.date[2])),r.a.createElement("div",{className:"col-4 p-4 entry-right text-center ".concat(t[e.day][1])},r.a.createElement("div",{className:"hours"},e.hours),"hours")),r.a.createElement(J,{entry:o,approved:u,setApproved:d,setEntry:c,updateEntry:function(e){x.updateEntry(e).then((function(e){e.error?m.error=e.error:m.setEntries(e.entries)}))},entryIndex:e.index}))};var R=function(e){var t=Object(n.useContext)(B);return r.a.createElement("div",{className:"modal fade",id:"time-card",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content p-3 border-radius-15"},r.a.createElement("div",{className:"modal-header border-0"},r.a.createElement("h1",{className:"pt-mono modal-title",id:"exampleModalLabel"},"Time Card"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body container-fluid",id:"new"},r.a.createElement("div",{className:"pt-mono orange-text"},"Start:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("select",{defaultValue:t.payPeriodStart[0],id:"start-month"},r.a.createElement("option",{value:"1"},"January"),r.a.createElement("option",{value:"2"},"February"),r.a.createElement("option",{value:"3"},"March"),r.a.createElement("option",{value:"4"},"April"),r.a.createElement("option",{value:"5"},"May"),r.a.createElement("option",{value:"6"},"June"),r.a.createElement("option",{value:"7"},"July"),r.a.createElement("option",{value:"8"},"August"),r.a.createElement("option",{value:"9"},"September"),r.a.createElement("option",{value:"10"},"October"),r.a.createElement("option",{value:"11"},"November"),r.a.createElement("option",{value:"12"},"December"))),r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("input",{defaultValue:t.payPeriodStart[1],id:"start-day",type:"number",placeholder:"Day"})),r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("input",{defaultValue:t.payPeriodStart[2],id:"start-year",type:"number",placeholder:"Year"}))),r.a.createElement("div",{className:"mt-3 pt-mono orange-text"},"End:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("select",{defaultValue:t.payPeriodEnd[0],id:"end-month"},r.a.createElement("option",{value:"1"},"January"),r.a.createElement("option",{value:"2"},"February"),r.a.createElement("option",{value:"3"},"March"),r.a.createElement("option",{value:"4"},"April"),r.a.createElement("option",{value:"5"},"May"),r.a.createElement("option",{value:"6"},"June"),r.a.createElement("option",{value:"7"},"July"),r.a.createElement("option",{value:"8"},"August"),r.a.createElement("option",{value:"9"},"September"),r.a.createElement("option",{value:"10"},"October"),r.a.createElement("option",{value:"11"},"November"),r.a.createElement("option",{value:"12"},"December"))),r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("input",{defaultValue:t.payPeriodEnd[1],id:"end-day",type:"number",placeholder:"Day"})),r.a.createElement("div",{className:"col-4 px-1"},r.a.createElement("input",{defaultValue:t.payPeriodEnd[2],id:"end-year",type:"number",placeholder:"Year"})))),r.a.createElement("div",{className:"modal-footer border-0 d-block text-center"},r.a.createElement("button",{type:"button","data-dismiss":"modal",name:"save",className:"btn pill px-3 btn-secondary"},"Cancel"),r.a.createElement("button",{onClick:function(){var e=[document.getElementById("start-month").value,document.getElementById("start-day").value,document.getElementById("start-year").value],a=[document.getElementById("end-month").value,document.getElementById("end-day").value,document.getElementById("end-year").value];t.setPayPeriodStart(e),t.setPayPeriodEnd(a)},type:"button","data-dismiss":"modal",name:"save",className:"btn pill px-3 time-card-save"},"Save")))))};var L=function(e){var t=Object(n.useContext)(B),a=["January","February","March","April","May","June","July","August","September","October","November","December"];return r.a.createElement("div",{className:"entries-heading-container container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",{className:"entries-heading inline "},"Time Card"),r.a.createElement("button",{"data-toggle":"modal","data-target":"#time-card",className:"btn pt-mono inline btn-primary pill pay-period-btn"},r.a.createElement("div",{id:"pay-period-start",className:"inline"},a[t.payPeriodStart[0]-1]," ",t.payPeriodStart[1]),r.a.createElement("span",{className:"inline yellow-text"},"  -  "),r.a.createElement("div",{id:"pay-period-end",className:"inline"},a[t.payPeriodEnd[0]-1]," ",t.payPeriodEnd[1])))),r.a.createElement(R,null))};var H=function(){var e=Object(n.useContext)(B),t=Object(n.useContext)(p),a=e.payPeriodStart,l=e.payPeriodEnd,o=Object(n.useState)(!0),c=Object(M.a)(o,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){var a=setInterval((function(){N().catch((function(e){clearInterval(a),t.logout()}))}),3e4);x.getEntries().then((function(a){a.error?401===a.status_code?(e.setError("Whoops! You are not logged in!"),t.logout()):(e.setError({error:a.error}),t.logout()):e.setState({loading:!1,entries:a.entries,firstName:a.firstName,payPeriodStart:a.payPeriodStart,payPeriodEnd:a.payPeriodEnd,payRate:a.payRate,totalHours:a.totalHours,allApproved:!1})}))}),[]),Object(n.useEffect)((function(){i(!0),x.getEntries(a,l).then((function(t){e.setEntries(t.entries),e.setFirstName(t.firstName),e.setPayRate(t.payRate),e.setTotalHours(t.totalHours),i(!1)}))}),[a,l]),r.a.createElement("div",null,e.payPeriodStart?r.a.createElement(L,null):r.a.createElement("div",null),r.a.createElement("div",{className:s?"container-fluid px-4":"d-none"},r.a.createElement("h5",{className:"display-4"},"Loading...")),r.a.createElement("div",{className:s?"d-none":""},e.entries?e.entries.map((function(e,t){return r.a.createElement(D,Object.assign({},e,{index:t,key:t}))})):null))};function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var B=r.a.createContext({}),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,error:null,message:null,setMessage:function(e){a.setState({message:e})},setError:function(e){a.setState({error:e})},setEntries:function(e){a.setState({entries:e})},setPayRate:function(e){a.setState({payRate:e})},setPayPeriodStart:function(e){a.setState({payPeriodStart:e})},setPayPeriodEnd:function(e){a.setState({payPeriodEnd:e})},setTotalHours:function(e){a.setState({totalHours:e})},setLoading:function(e){a.setState({loading:e})},approveAll:function(){x.approveAll(a.state.payPeriodStart,a.state.payPeriodEnd).then((function(e){a.setState(e),a.setState({allApproved:!0})}))},setFirstName:function(e){a.setState({firstName:e})},setState:function(e){a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){if(this.state.message||this.state.error){var e=this;setTimeout((function(){e.setState({error:null,message:null})}),3e3)}}},{key:"render",value:function(){return this.state.error401?r.a.createElement(m.a,{to:{pathname:"/login",state:{error:"Whoops! You'll need to login again!"}}}):r.a.createElement(B.Provider,{value:this.state},r.a.createElement("div",{className:"App"},r.a.createElement(T,null),r.a.createElement("div",{className:"App-body"},this.state.message?r.a.createElement("div",{className:"alert mx-4 alert-success",role:"alert"},this.state.message):r.a.createElement("div",null),this.state.error?r.a.createElement("div",{className:"alert mx-4 alert-danger",role:"alert"},this.state.error):r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("div",{className:this.state.loading?"":"d-none"}," ",r.a.createElement("h5",{className:"display-4"},"Loading...")),r.a.createElement("div",{className:this.state.loading?"d-none":""},r.a.createElement(I,null),r.a.createElement(H,null))))))}}]),t}(r.a.Component),W=function(e){return r.a.createElement(p.Consumer,null,(function(t){return r.a.createElement(F,Object.assign({context:t},e))}))},q=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.context.isAuthenticated?r.a.createElement(m.b,this.props):r.a.createElement(m.a,{to:{pathname:"/login",state:{error:"Whoops! You need to be logged in!"}}})}}]),t}(r.a.Component),Y=function(e){return r.a.createElement(p.Consumer,null,(function(t){return r.a.createElement(q,Object.assign({},e,{context:t}))}))},_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isAuthenticated:!1,authenticate:function(){return x.getIsAuthenticated().then((function(e){return a.setState({isAuthenticated:e}),e}))},authToken:function(){return x.getAuthToken()},logout:function(){x.logout(),a.setState({isAuthenticated:!1})}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){x.getAuthToken()&&this.state.authenticate()}},{key:"render",value:function(){return r.a.createElement(p.Provider,{value:this.state},r.a.createElement(A.a,null,r.a.createElement(m.d,null,r.a.createElement(Y,{path:"/core",component:W}),r.a.createElement(m.b,{path:["/login","/"],component:S}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.9c1bfb31.chunk.js.map