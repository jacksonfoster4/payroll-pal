{"ast":null,"code":"import Cookies from 'js-cookie';\nconst apiUrl = 'http://localhost:5000'; // const apiUrl = 'payrollpal.thefoundationworks.com/api\n\nconst JWT = () => {\n  return \"JWT \" + PayrollPalClient.getAuthToken();\n};\n\nclass PayrollPalClient {\n  static async sendAuthedRequest(path, method, body) {\n    method == undefined ? method == 'POST' : null;\n    return await fetch(\"\".concat(apiUrl).concat(path), {\n      headers: {\n        \"Content-Type\": 'application/json'\n      },\n      method: method,\n      body: body\n    }).then(res => res.json()).then(result => {\n      return result;\n    }, error => {\n      return error;\n    });\n  }\n\n  static login(...args) {\n    let username = args[0].username;\n    let password = args[0].password;\n    let body = JSON.stringify({\n      'username': username,\n      'password': password\n    });\n    let demo = args[0].demo;\n    return PayrollPalClient.sendAuthedRequest('/auth', 'POST', body).then(result => {\n      let token = result['access_token'];\n      PayrollPalClient.setAuthToken(token);\n      return result;\n    }, error => {\n      return error;\n    });\n    return fetch(\"\".concat(apiUrl, \"/auth\"), {\n      headers: {\n        \"Content-Type\": 'application/json'\n      },\n      method: 'POST',\n      body: body\n    }).then(res => res.json()).then(result => {\n      let token = result['access_token'];\n      PayrollPalClient.setAuthToken(token);\n      console.log('cookie has been set');\n      return result;\n    }, error => {\n      console.log(error);\n      return error;\n    });\n  }\n\n  static async getEntries(start, end) {\n    return await fetch(\"\".concat(apiUrl, \"/get-entries\"), {\n      headers: new Headers({\n        \"Content-Type\": 'application/json',\n        \"Authorization\": JWT()\n      }),\n      method: 'POST'\n    }).then(res => res.json()).then(error => {\n      return error;\n    }, result => {\n      return result;\n    });\n  }\n\n  static updateEntry(entry) {\n    /* \n    ajax.post({\n        'url': `${apiUrl}/update-entry`,\n        'body': {\n            'token': token,\n            'entry': entry\n        }\n    }) \n    */\n    console.log(\"updated entry from ppc\");\n    console.log(\"Date: \".concat(entry.date));\n    console.log(\"Punches: \".concat(entry.punches));\n    console.log(\"Approved: \".concat(entry.approved));\n    return entry;\n  }\n\n  static logout() {\n    PayrollPalClient.deleteAuthToken();\n    Cookies.remove('demo');\n  }\n\n  static approveAll() {\n    /* ajax.post({\n        'url': `${apiUrl}/approve-all`,\n        'body': {\n            'token': token,\n            'start': start,\n            'end': end\n        }\n    }) */\n    console.log('All hours have been approved');\n  }\n\n  static getAuthToken() {\n    return Cookies.get('authToken');\n  }\n\n  static getIsAuthenticated() {\n    if (Cookies.get('authToken')) {\n      return true;\n    } else {\n      console.log('no token');\n      return false;\n    }\n    /* let isAuthenticated = ajax.post({\n        'url': `${apiUrl}/authenticate`\n        'body': {\n            'token': token\n        }\n    }) */\n\n  }\n\n  static setAuthToken(token) {\n    Cookies.set('authToken', token);\n  }\n\n  static deleteAuthToken() {\n    Cookies.remove('authToken');\n  }\n\n}\n\nexport default PayrollPalClient;","map":{"version":3,"sources":["/Users/jacksonfoster/Code/projects/payroll-pal/front-end/payroll-pal/src/payroll-pal-client.js"],"names":["Cookies","apiUrl","JWT","PayrollPalClient","getAuthToken","sendAuthedRequest","path","method","body","undefined","fetch","headers","then","res","json","result","error","login","args","username","password","JSON","stringify","demo","token","setAuthToken","console","log","getEntries","start","end","Headers","updateEntry","entry","date","punches","approved","logout","deleteAuthToken","remove","approveAll","get","getIsAuthenticated","set"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie'\n\nconst apiUrl = 'http://localhost:5000'\n// const apiUrl = 'payrollpal.thefoundationworks.com/api\n\nconst JWT = () => {\n    return \"JWT \" + PayrollPalClient.getAuthToken()\n} \n\nclass PayrollPalClient  {\n    static async sendAuthedRequest(path, method, body){\n        method == undefined ? method == 'POST' : null\n\n        return await fetch(`${apiUrl}${path}`, {\n            headers: { \"Content-Type\": 'application/json'},\n            method: method,\n            body: body,\n        }).then(res => res.json())\n          .then(\n            (result) => {\n                return result\n            },\n            (error) => {\n                return error\n            }\n          )\n    }\n    static login(...args) { \n        let username = args[0].username\n        let password = args[0].password\n        let body = JSON.stringify({'username': username, 'password': password})\n        let demo = args[0].demo\n        return PayrollPalClient.sendAuthedRequest('/auth', 'POST', body).then(\n            (result) => {\n                let token = result['access_token']\n                PayrollPalClient.setAuthToken(token)\n                return result\n            },\n            (error) => {\n                return error\n            }\n        )\n        return fetch(`${apiUrl}/auth`, {\n            headers: { \"Content-Type\": 'application/json'},\n            method: 'POST',\n            body: body,\n        })\n        .then(res => res.json()) \n        .then(\n            (result) => {\n                let token = result['access_token']\n                PayrollPalClient.setAuthToken(token)\n                console.log('cookie has been set')\n                return result\n            },\n\n            (error) => {\n                console.log(error)\n                return error\n            }\n            \n        )\n    }\n    static async getEntries(start, end){\n        return await fetch(`${apiUrl}/get-entries`, {\n            headers: new Headers({\n                \"Content-Type\": 'application/json',\n                \"Authorization\": JWT(),\n            }),\n            method: 'POST',\n        })\n        .then(\n            (res) => res.json() ) \n        .then(\n            (error) => {\n                return error\n            },\n            (result) => {\n                return result\n            }\n            \n        )\n    }\n    static updateEntry(entry) {\n        /* \n        ajax.post({\n            'url': `${apiUrl}/update-entry`,\n            'body': {\n                'token': token,\n                'entry': entry\n            }\n        }) \n        */\n        console.log(`updated entry from ppc`)\n        console.log(`Date: ${entry.date}`)\n        console.log(`Punches: ${entry.punches}`)\n        console.log(`Approved: ${entry.approved}`)\n        return entry\n    }\n    static logout(){\n        PayrollPalClient.deleteAuthToken();\n        Cookies.remove('demo')\n    }\n    static approveAll(){\n        /* ajax.post({\n            'url': `${apiUrl}/approve-all`,\n            'body': {\n                'token': token,\n                'start': start,\n                'end': end\n            }\n        }) */\n        console.log('All hours have been approved')\n    }\n    static getAuthToken(){\n        return Cookies.get('authToken')\n    }\n\n    static getIsAuthenticated(){\n        if(Cookies.get('authToken')){\n            return true\n        }\n        else {\n            console.log('no token')\n            return false\n        }\n        /* let isAuthenticated = ajax.post({\n            'url': `${apiUrl}/authenticate`\n            'body': {\n                'token': token\n            }\n        }) */\n    }\n\n    static setAuthToken(token){\n        Cookies.set('authToken', token)\n    }\n\n    static deleteAuthToken(){\n        Cookies.remove('authToken')\n    }\n\n}\n\nexport default PayrollPalClient;"]},"metadata":{},"sourceType":"module"}